/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	RCS generic config
//
//	Original by the RO team, updates made by the CH4 Team
//
//
//		Sources:
//
// 			1. https://www.rocket.com/files/aerojet/documents/Capabilities/PDFs/Bipropellant%20Data%20Sheets.pdf
// 			2. https://www.apolloartifacts.com/2013/11/marquardt-r-4d-apollo-spacecraft-attitude-control-engine.html
// 			3. https://forum.nasaspaceflight.com/index.php?action=dlattach;topic=32078.0;attach=525884
//
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
@PART[*]:HAS[#engineType[RCSGeneric]]:FOR[RealismOverhaulEngines]:AFTER[RealismOverhaul]
{	
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleRCS
		thrustRating = thrusterPower
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		configuration = Nitrogen
		modded = false	
		origMass = 0.016

		CONFIG
		{
			name = HTP
			thrusterPower = 0.255
			PROPELLANT
			{
				ratio = 1.0
				name = HTP
				DrawGauge = True
			}
			IspSL = 0.177
			IspV = 0.465
		}

		CONFIG
		{
			name = Hydrazine
			thrusterPower = 0.275
			PROPELLANT
			{
				ratio = 1.0
				name = Hydrazine
				DrawGauge = True
			}
			IspSL = 0.274
			IspV = 0.72
		}

		CONFIG
		{
			name = NitrousOxide
			thrusterPower = 0.265
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				DrawGauge = True
			}
			IspSL = 0.2
			IspV = 0.525
		}

		CONFIG
		{
			name = Helium
			thrusterPower = 0.072
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				DrawGauge = True
			}
			IspSL = 0.203
			IspV = 0.453
		}

		CONFIG
		{
			name = Nitrogen
			thrusterPower = 0.114
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				DrawGauge = True
			}
			IspSL = 0.1001462
			IspV = 0.195
		}

		CONFIG
		{
			name = MMH+NTO
			thrusterPower = 0.445
			PROPELLANT
			{
				name = MMH
				ratio = 0.5
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.50
			}
			IspSL = 0.362
			IspV = 0.952
		}

		CONFIG
		{
			name = MMH+MON3
			thrusterPower = 0.445
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				DrawGauge = True
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
			}
			IspSL = 0.362
			IspV = 0.952
		}

		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = 0.442
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
			}
			IspSL = 0.361
			IspV = 0.943
		}

		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = 0.455
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
			}
			IspSL = 0.366
			IspV = 0.955
		}

		CONFIG
		{
			name = Cavea-B
			thrusterPower = 0.425
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				DrawGauge = True
			}
			IspSL = 0.274
			IspV = 0.939
		}
		
		//Changing History Configs start here
		
		CONFIG
		{
			name = ADN-LMP-103S
			thrusterPower = 0.225
			PROPELLANT
			{
				ratio = 1.0
				name = LMP-103S
			}
			IspSL = 0.29
			IspV = 0.761 // 256
		}
		
		CONFIG
		{
			name = ADN-FLP-106
			thrusterPower = 0.245
			PROPELLANT
			{
				ratio = 1.0
				name = FLP-106
			}
			IspSL = 0.295
			IspV = 0.782 // 263
		}
		
		CONFIG
		{
			name = LqdMethane+LqdOxygen
			thrusterPower = 0.445 // same as hypergolic seems approx right, but there is no flown precedent.
			PROPELLANT
			{
				name = LqdMethane
				ratio = 0.4268
				DrawGauge = True
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5732 // ratio based on the RL-10 CECE series
			}
			IspSL = 0.356
			IspV = 0.917 // (3) 300sec ISP at Shuttle era tech
		}
		
		CONFIG
		{
			name = LqdHydrogen+LqdOxygen
			thrusterPower = 0.4 // this seems approx right, but there is no flown precedent so it is very hard to tell.
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7325
				DrawGauge = True
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2675 // ratio based on the RL-10 CECE series
			}
			IspSL = 0.493
			IspV = 1.172 // 395sec ISP at near-future (present at time of writing, 2020) tech.
		}
		
		CONFIG
		{
			name = Kerosene+LqdOxygen
			thrusterPower = 0.455
			PROPELLANT
			{
				name = Kerosene
				ratio = 0.3719 // Kestrel ratio
				DrawGauge = True
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.6281
			}
			IspSL = 0.36
			IspV = 0.975 // 328
		}
		
		CONFIG
		{
			name = Kerosene+HTP
			thrusterPower = 0.445
			PROPELLANT
			{
				name = Kerosene
				ratio = 0.1755
				DrawGauge = True
			}
			PROPELLANT
			{
				name = HTP
				ratio = 0.8245
			}
			IspSL = 0.29
			IspV = 0.89	// 299
		}
		
		CONFIG
		{
			name = Ethanol+LqdOxygen
			thrusterPower = 0.445
			PROPELLANT
			{
				name = Ethanol75
                ratio = 0.5285 // RS-88 ratio
				DrawGauge = True
			}
			PROPELLANT
			{
				name = LqdOxygen
                ratio = 0.4715
			}
			IspSL = 0.36
			IspV = 0.965 // 325
		}
		
		CONFIG
		{
			name = LqdHydrogen
			thrusterPower = 0.036 //half the atomic mass of helium, thus half the thrust.
			PROPELLANT
			{
				ratio = 1.0
				name = LqdHydrogen
				DrawGauge = True
			}
			IspSL = 0.297
			IspV = 0.534
		}
		
		CONFIG
		{
			name = LqdMethane
			thrusterPower = 0.229 //roughly 4x the mass of helium.
			PROPELLANT
			{
				ratio = 1.0
				name = LqdMethane
				DrawGauge = True
			}
			IspSL = 0.152 //Roughly half way between Helium and Nitrogen.
			IspV = 0.324 //Roughly half way between Helium and Nitrogen.
		}
		
		CONFIG
		{
			name = LqdOxygen
			thrusterPower = 0.228 //exactly 4x the mass of helium.
			PROPELLANT
			{
				ratio = 1.0
				name = LqdOxygen
				DrawGauge = True
			}
			IspSL = 0.152 //Almost the exact same atomic mass as Methane.
			IspV = 0.324 //Almost the exact same atomic mass as Methane.
		}
		
		CONFIG
		{
			name = HAN
			thrusterPower = 0.225
			PROPELLANT
			{
				ratio = 1.0
				name = AF-M315E
			}
			IspSL = 0.306
			IspV = 0.805 // 271
		}
	}
}
@PART[*]:HAS[~useRcsMass[True],#engineType[RCSGeneric]]:FOR[RealismOverhaulEngines]
{
	@MODULE[ModuleEngineConfigs]:HAS[#type[ModuleRCS]]
	{
		-origMass = NULL
	}
}
@PART[*]:HAS[#useRCSTestFlightConfig[True],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
	!useRCSTestFlightConfig = NULL

	TESTFLIGHT
	{
		name = ColdGasRCS
		mainConfiguration = engineConfig = Helium,engineConfig = Nitrogen,engineConfig = LqdHydrogen,engineConfig = LqdMethane,engineConfig = LqdOxygen:ColdGasRCS
		ratedBurnTime = 1200
		ignitionReliabilityStart = 0.98
		ignitionReliabilityEnd = 0.999
		ignitionDynPresFailMultiplier = 0.1
		cycleReliabilityStart = 0.98
		cycleReliabilityEnd = 0.999
		reliabilityDataRateMultiplier = 0.1
		techTransfer = NitrousOxide,HTP,Hydrazine,Cavea-B,MMH+NTO,MMH+MON3,UDMH+NTO,Aerozine50+NTO,LqdHydrogen+LqdOxygen,LqdMethane+LqdOxygen:50
	}

	TESTFLIGHT
	{
		name = MonopropellantRCS
		mainConfiguration = engineConfig = NitrousOxide,engineConfig = HTP,engineConfig = Hydrazine,engineConfig = Cavea-B:MonopropellantRCS
		ratedBurnTime = 1200
		ignitionReliabilityStart = 0.98
		ignitionReliabilityEnd = 0.999
		ignitionDynPresFailMultiplier = 0.1
		cycleReliabilityStart = 0.98
		cycleReliabilityEnd = 0.999
		reliabilityDataRateMultiplier = 0.1
		techTransfer = Helium,Nitrogen,MMH+NTO,MMH+MON3,UDMH+NTO,Aerozine50+NTO,LqdHydrogen+LqdOxygen,LqdMethane+LqdOxygen,LqdHydrogen,LqdMethane,LqdOxygen:50
	}

	TESTFLIGHT
	{
		name = BipropellantRCS
		mainConfiguration = engineConfig = MMH+NTO,engineConfig = MMH+MON3,engineConfig = UDMH+NTO,engineConfig = Aerozine50+NTO,engineConfig = LqdHydrogen+LqdOxygen, engineConfig = LqdMethane+LqdOxygen:BipropellantRCS
		ratedBurnTime = 1200
		ignitionReliabilityStart = 0.98
		ignitionReliabilityEnd = 0.999
		ignitionDynPresFailMultiplier = 0.1
		cycleReliabilityStart = 0.98
		cycleReliabilityEnd = 0.999
		reliabilityDataRateMultiplier = 0.1
		techTransfer = Helium,Nitrogen,NitrousOxide,HTP,Hydrazine,Cavea-B,LqdHydrogen,LqdMethane,LqdOxygen:50 //removed an unnecssary comma from the end of this line
	}
}
